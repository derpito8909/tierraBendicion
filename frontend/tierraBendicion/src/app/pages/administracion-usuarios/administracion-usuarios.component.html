<app-navegacion></app-navegacion>
<section class="usuarios d-flex flex-column align-items-center p-3">
  <nav aria-label="breadcrumb" class="w-100 container-breadcrumb">
    <ol class="breadcrumb mx-3 my-3 my-md-3">
      <li class="breadcrumb-item">
        <a routerLink="/principal">Inicio</a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">
        Administracion Usuarios
      </li>
    </ol>
  </nav>
  <div class="d-flex flex-column w-100 gap-3 mt-md-4 p-md-4 p-3">
    <article class="align-content-center text-center text-md-start">
      <h2>Administración de Usuarios</h2>
      <p class="text-start lh-base fs-6">
        En esta sección puedes realizar la administración de los usuarios. En
        este listado verás todos los usuarios registrados, donde también podrás
        dar clic en el icono de lápiz para editar su información y el icono de
        caneca para eliminar el usuario para que no ingrese más al sitio o
        agregar un nuevo usuario con el siguiente botón: 
      </p>
      <button
        (click)="addUser()"
        class="btn color-boton efecto-hover w-md-auto"
        role="button"
      >
        Nuevo usuario
      </button>
    </article>
    <div class="table-responsive mat-elevation-z8 w-100">
      <table mat-table [dataSource]="dataSource" matSort class="table">
        <!-- Name Column -->
        <ng-container matColumnDef="fullname">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            Nombre Completo
          </th>
          <td mat-cell *matCellDef="let user">{{ user.fullname }}</td>
        </ng-container>

        <!-- Email Column -->
        <ng-container matColumnDef="email">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            Correo Electrónico
          </th>
          <td mat-cell *matCellDef="let user">{{ user.email }}</td>
        </ng-container>

        <!-- Category Column -->
        <ng-container matColumnDef="category">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Categoría</th>
          <td mat-cell *matCellDef="let user">{{ user.category }}</td>
        </ng-container>

        <!-- Edit Button Column -->
        <ng-container matColumnDef="edit">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let user">
            <button type="button" class="btn p-0" (click)="editUser(user._id)">
              <i class="bi bi-pencil-square h5"></i>
            </button>
          </td>
        </ng-container>

        <!-- Delete Button Column -->
        <ng-container matColumnDef="delete">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let user">
            <button
              type="button"
              class="btn p-0"
              (click)="deleteUser(user._id)"
            >
              <i class="bi bi-trash-fill text-danger h5"></i>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumns"
          (click)="selection.toggle(row)"
        ></tr>
      </table>

      <mat-paginator [pageSize]="10" showFirstLastButtons></mat-paginator>
    </div>
  </div>
</section>
